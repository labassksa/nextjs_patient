(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{8934:function(e,t,a){Promise.resolve().then(a.bind(a,2016))},2016:function(e,t,a){"use strict";a.r(t);var o=a(4888),r=a(9318),s=a(7701),n=a(969),l=a(6300);let i=()=>{let e=(0,s.useSearchParams)(),t=e.get("sessionId"),a=e.get("countryCode"),i=(0,r.useRef)(!1),[c,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{window.myFatoorah&&t&&a&&u()},[t,a]);let u=()=>{i.current||(console.log("Initializing MyFatoorah with:",{countryCode:a,sessionId:t}),window.myFatoorah.init({countryCode:a,sessionId:t,cardViewId:"card-element",supportedNetworks:"v,m,md,ae"}),console.log("MyFatoorah initialized successfully."),i.current=!0,d(!0))},m=async()=>{if(console.log("Submitting payment..."),!window.myFatoorah||"function"!=typeof window.myFatoorah.submit){console.error("window.myFatoorah.submit is not available.");return}try{let e=await window.myFatoorah.submit();if(console.log("Submit response received:",e),e){let t=localStorage.getItem("labass_token");if(!t){console.error("Token not found in localStorage.");return}try{let a=await n.Z.post("http://34.170.14.141:4000/api_labass/execute-payment",{SessionId:e.sessionId,DisplayCurrencyIso:"KWD",InvoiceValue:101,CallBackUrl:"https://yoursite.com/success",ErrorUrl:"https://yoursite.com/error"},{headers:{Authorization:"Bearer ".concat(t)}});a.data.IsSuccess?(console.log("Payment URL: ".concat(a.data.Data.PaymentURL)),h(a.data.Data.PaymentURL)):console.error("Execute payment failed:",a.data.Message)}catch(e){console.error("Error executing payment:",e)}}else console.error("Payment submission failed:",e)}catch(e){console.error("Payment error:",e)}},h=e=>{document.body.innerHTML="";let t=document.createElement("iframe");t.src="".concat(e,"&iframeEnabled=true"),t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.border="none",t.style.zIndex="9999",document.body.appendChild(t)};return(0,o.jsxs)("div",{className:"bg-gray-100 min-h-screen flex flex-col justify-between ",children:[(0,o.jsx)("script",{src:"https://demo.myfatoorah.com/cardview/v2/session.js",defer:!0,onLoad:u}),(0,o.jsx)(l.default,{title:"ادفع",showBackButton:!0}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"flex flex-row text-black text-lg font-bold mb-4 mt-16",dir:"rtl",children:"أدخل معلومات البطاقة"}),(0,o.jsx)("div",{className:"w-full max-w-md bg-white p-6 rounded-lg shadow-md",children:(0,o.jsx)("div",{className:"bg-white",children:(0,o.jsx)("div",{id:"card-element"})})})]}),(0,o.jsx)("div",{children:(0,o.jsx)("button",{className:"bg-custom-green w-full text-white py-2 px-4 rounded mt-4",onClick:m,disabled:!c,children:"ادفع"})})]})};t.default=()=>(0,o.jsx)(r.Suspense,{fallback:(0,o.jsx)("div",{children:"Loading..."}),children:(0,o.jsx)(i,{})})},6300:function(e,t,a){"use strict";var o=a(4888);a(9318);var r=a(7701),s=a(4517);t.default=e=>{let{title:t,showBackButton:a=!1}=e,n=(0,r.useRouter)();return(0,o.jsxs)("div",{className:"fixed top-0 w-full bg-white p-4 flex items-center justify-between z-10",children:[(0,o.jsx)("h1",{className:"text-lg text-gray-500 font-normal flex-grow text-center",children:t}),a&&(0,o.jsx)("button",{onClick:()=>n.back(),className:"ml-2",children:(0,o.jsx)(s.Z,{className:"h-5 w-5 text-gray-500","aria-hidden":"true"})})]})}},4517:function(e,t,a){"use strict";var o=a(9318);let r=o.forwardRef(function(e,t){let{title:a,titleId:r,...s}=e;return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},s),a?o.createElement("title",{id:r},a):null,o.createElement("path",{fillRule:"evenodd",d:"M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z",clipRule:"evenodd"}))});t.Z=r}},function(e){e.O(0,[927,969,419,248,744],function(){return e(e.s=8934)}),_N_E=e.O()}]);