(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[790],{6787:function(e,t,s){Promise.resolve().then(s.bind(s,3565))},3837:function(e,t){"use strict";var s=Symbol.for("react.element"),r=(Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.memo"),Symbol.for("react.lazy"),{isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}}),a=Object.assign,l={};function n(e,t,s){this.props=e,this.context=t,this.refs=l,this.updater=s||r}function c(){}function o(e,t,s){this.props=e,this.context=t,this.refs=l,this.updater=s||r}n.prototype.isReactComponent={},n.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},n.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},c.prototype=n.prototype;var i=o.prototype=new c;i.constructor=o,a(i,n.prototype),i.isPureReactComponent=!0;var d=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};t.createElement=function(e,t,r){var a,l={},n=null,c=null;if(null!=t)for(a in void 0!==t.ref&&(c=t.ref),void 0!==t.key&&(n=""+t.key),t)d.call(t,a)&&!u.hasOwnProperty(a)&&(l[a]=t[a]);var o=arguments.length-2;if(1===o)l.children=r;else if(1<o){for(var i=Array(o),p=0;p<o;p++)i[p]=arguments[p+2];l.children=i}if(e&&e.defaultProps)for(a in o=e.defaultProps)void 0===l[a]&&(l[a]=o[a]);return{$$typeof:s,type:e,key:n,ref:c,props:l,_owner:null}}},728:function(e,t,s){"use strict";e.exports=s(3837)},3565:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return I}});var r,a,l,n,c,o=s(4888),i=s(9318),d=s(4936),u=()=>(0,o.jsxs)("div",{className:"bg-gray-100 text-black p-4 mt-2",dir:"rtl",children:[(0,o.jsx)("p",{children:"سيتم تحويلك الى طبيب عام خلال ثلاثة دقائق"}),(0,o.jsx)("h2",{className:"text-lg font-semibold mt-4",children:"طرق الدفع المتوفرة"}),(0,o.jsxs)("div",{className:"flex justify-around mt-4",children:[(0,o.jsx)(d.default,{src:"/icons/visa.svg",alt:"Visa",width:64,height:40}),(0,o.jsx)(d.default,{src:"/icons/mada.svg",alt:"Maestro",width:64,height:40}),(0,o.jsx)(d.default,{src:"/icons/mc.svg",alt:"Mastercard",width:64,height:40}),(0,o.jsx)(d.default,{src:"/icons/apple_pay.svg",alt:"Apple Pay",width:64,height:40})]})]});(r=a||(a={})).Card="card",r.ApplePay="apple";var p=s(728);function f(){return(f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)({}).hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(null,arguments)}var m=function(e){return p.createElement("svg",f({width:34,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=p.createElement("path",{d:"M20 13.5c-1.25 0-2.313-.438-3.188-1.313C15.938 11.313 15.5 10.25 15.5 9c0-1.25.438-2.313 1.313-3.188S18.75 4.5 20 4.5c1.25 0 2.313.438 3.188 1.313S24.5 7.75 24.5 9c0 1.25-.438 2.313-1.313 3.188-.875.874-1.937 1.312-3.187 1.312zM9.5 18a2.889 2.889 0 01-2.119-.881A2.89 2.89 0 016.5 15V3c0-.825.294-1.531.881-2.119A2.889 2.889 0 019.5 0h21c.825 0 1.531.294 2.119.881.587.588.881 1.294.881 2.119v12c0 .825-.294 1.531-.881 2.119A2.889 2.889 0 0130.5 18h-21zm3-3h15c0-.825.294-1.531.881-2.119A2.889 2.889 0 0130.5 12V6a2.889 2.889 0 01-2.119-.881A2.889 2.889 0 0127.5 3h-15c0 .825-.294 1.531-.881 2.119A2.89 2.89 0 019.5 6v6a2.89 2.89 0 012.119.881c.587.588.881 1.294.881 2.119zM29 24H3.5a2.889 2.889 0 01-2.119-.881A2.89 2.89 0 01.5 21V4.5h3V21H29v3z",fill:"#4DA514"})))};function h(){return(h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)({}).hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(null,arguments)}var y=function(e){return p.createElement("svg",h({width:42,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),n||(n=p.createElement("g",{clipPath:"url(#apple_pay_svg__clip0_665_7006)"},p.createElement("path",{d:"M40.294 24H1.706A1.706 1.706 0 010 22.294V1.706C0 .764.764 0 1.706 0h38.588C41.236 0 42 .764 42 1.706v20.588c0 .942-.764 1.706-1.706 1.706z",fill:"#fff"}),p.createElement("path",{d:"M11.664 8.676c-.363.44-.944.785-1.526.736-.072-.594.212-1.225.545-1.614.364-.452 1-.773 1.514-.798.06.618-.175 1.225-.533 1.676zm.527.854c-.842-.05-1.562.488-1.962.488-.406 0-1.017-.464-1.683-.451-.866.012-1.672.513-2.114 1.31-.908 1.596-.236 3.959.642 5.258.43.643.945 1.348 1.623 1.323.642-.025.896-.427 1.671-.427.782 0 1.006.427 1.684.415.702-.013 1.144-.643 1.574-1.287.49-.73.69-1.44.703-1.478-.013-.012-1.357-.538-1.369-2.121-.012-1.324 1.06-1.954 1.108-1.992-.605-.915-1.55-1.014-1.877-1.038zm4.863-1.794v9.642h1.465V14.08h2.029c1.853 0 3.154-1.298 3.154-3.178s-1.277-3.167-3.106-3.167h-3.542zm1.465 1.262h1.69c1.271 0 1.998.692 1.998 1.91 0 1.219-.727 1.918-2.005 1.918H18.52V8.998zm7.86 8.454c.92 0 1.774-.476 2.162-1.23h.03v1.156h1.356v-4.8c0-1.391-1.09-2.288-2.767-2.288-1.556 0-2.707.91-2.75 2.159h1.32c.11-.594.649-.984 1.388-.984.896 0 1.398.427 1.398 1.213v.531l-1.828.112c-1.702.105-2.622.816-2.622 2.053 0 1.25.95 2.078 2.313 2.078zm.393-1.144c-.78 0-1.277-.384-1.277-.971 0-.606.478-.959 1.392-1.014l1.63-.106v.545c0 .903-.752 1.546-1.744 1.546zM31.739 20c1.429 0 2.101-.557 2.688-2.245L37 10.383h-1.49l-1.725 5.696h-.03l-1.727-5.696h-1.531l2.482 7.02-.133.426c-.224.724-.587 1.002-1.235 1.002-.115 0-.34-.012-.43-.025v1.157c.085.025.448.037.557.037z",fill:"#000"}))),c||(c=p.createElement("defs",null,p.createElement("clipPath",{id:"apple_pay_svg__clip0_665_7006"},p.createElement("path",{fill:"#fff",d:"M0 0h42v24H0z"})))))},x=e=>{let{method:t,setMethod:s}=e;return(0,o.jsxs)("div",{className:"bg-white pt-4 pb-4 mx-4 mt-2 rounded-lg",dir:"rtl",children:[(0,o.jsx)("h2",{className:"text-lg font-semibold text-black pr-2",children:"اختر طريقة الدفع"}),(0,o.jsxs)("div",{className:"flex flex-col items-start justify-between mt-4 space-y-2",children:[(0,o.jsxs)("button",{onClick:()=>s(a.Card),className:"flex items-center justify-between p-2 w-full text-black",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"w-4 h-4 rounded-full ml-2 ".concat(t===a.Card?"bg-custom-green":"bg-gray-400")}),"البطاقة الاتمانية"]}),(0,o.jsx)(m,{className:""})," "]}),(0,o.jsx)("div",{className:"w-full border-t border-gray-200"})," ",(0,o.jsxs)("button",{onClick:()=>s(a.ApplePay),className:"flex items-center justify-between p-2 w-full text-black",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"w-4 h-4 rounded-full ml-2 ".concat(t===a.ApplePay?"bg-custom-green":"bg-gray-400")}),"ابل باي"]}),(0,o.jsx)(y,{className:""})," "]})]})]})},b=()=>(0,o.jsxs)("div",{className:"bg-gray-100 rounded-xl p-4 mt-4 mx-2 text-black",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{children:"75 SR"}),(0,o.jsx)("span",{children:"الاستشارة"})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{children:"11.25 SR"}),(0,o.jsx)("span",{children:"الضريبة"})]}),(0,o.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,o.jsx)("span",{children:"86.25 SR"}),(0,o.jsx)("span",{children:"المبلغ الاجمالي"})]})]}),j=s(7701),g=s(969),v=e=>{let{method:t}=e,s=(0,j.useRouter)(),[r,l]=(0,i.useState)(!1),n=(0,i.useRef)(null),c=(0,i.useRef)(!1),[d,u]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(t!==a.ApplePay||c.current){if(t!==a.ApplePay){let e=document.getElementById("apple-pay-container");e&&(e.innerHTML="",u(!1))}}else(()=>{let e=document.createElement("script");return e.src="https://demo.myfatoorah.com/applepay/v3/applepay.js",e.async=!0,document.body.appendChild(e),e.onload=()=>{console.log("Apple Pay script loaded successfully."),c.current=!0,n.current&&(window.myFatoorahAP.init(n.current),u(!0))},e.onerror=()=>{console.error("Error loading Apple Pay script.")},()=>{document.body.removeChild(e)}})()},[t]);let p=async()=>{if(!r){l(!0);try{let e=await g.Z.post("http://34.170.14.141:4000/api_labass/initiate-session",{InvoiceAmount:100,CurrencyIso:"KWD"});if(e.data.IsSuccess){let{SessionId:r,CountryCode:l}=e.data.Data;t===a.Card?s.push("/cardDetails?sessionId=".concat(r,"&countryCode=").concat(l)):t===a.ApplePay&&(n.current={sessionId:r,countryCode:"KWT",currencyCode:"KWD",amount:"100",cardViewId:"apple-pay-container",callback:m,sessionStarted:h,sessionCanceled:y},c.current&&(window.myFatoorahAP.init(n.current),u(!0)))}else console.error("Failed to initiate session:",e.data.Message)}catch(e){console.error("Error initiating session:",e)}finally{l(!1)}}},f=async e=>{try{let t=await g.Z.post("http://34.170.14.141/api_labass/execute-payment",{SessionId:e,DisplayCurrencyIso:"KWD",InvoiceValue:120,CallBackUrl:"https://yoursite.com/success",ErrorUrl:"https://yoursite.com/error"},{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicm9sZSI6InBhdGllbnQiLCJwYXRpZW50UHJvZmlsZSI6eyJ1c2VyIjp7ImNyZWF0ZWRBdCI6IjIwMjQtMDgtMjlUMTk6MjE6MDguNjYzWiIsImlkIjoxLCJwaG9uZU51bWJlciI6Iis5NjY1OTE3MTcwMjQiLCJmaXJzdE5hbWUiOm51bGwsImxhc3ROYW1lIjpudWxsLCJlbWFpbCI6bnVsbCwiZ2VuZGVyIjpudWxsLCJuYXRpb25hbElkIjpudWxsLCJkYXRlT2ZCaXJ0aCI6bnVsbCwicmVnaXN0cmF0aW9uVG9rZW4iOm51bGwsInJvbGUiOiJwYXRpZW50In0sImlkIjoxfSwiaWF0IjoxNzI0OTU5MjY4fQ.YcDn0Fs8Dg9fLF_4LyYfb7z7OAwegHQLuf4AfHOBFGo"}});t.data.IsSuccess?console.log("Payment successful:",t.data):console.error("Payment failed:",t.data.Message)}catch(e){console.error("Error executing payment:",e)}},m=e=>{f(e.sessionId)},h=()=>{console.log("Session started")},y=()=>{console.log("Session canceled")};return(0,i.useEffect)(()=>{if(t===a.ApplePay){p();let e=document.getElementById("apple-pay-container");e&&(e.style.display="block")}},[t]),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{id:"apple-pay-container"}),t===a.Card&&(0,o.jsx)("button",{className:"sticky bottom-0 pb-4 w-full font-bold bg-custom-green text-white py-4 px-4 rounded-3xl",dir:"rtl",onClick:p,disabled:r,children:r?"Processing...":"الدفع"})]})},w=()=>{let[e,t]=(0,i.useState)("");return(0,o.jsxs)("div",{className:"relative flex  justify-around border-2 border-gray-300 rounded-md bg-white mx-2",children:[(0,o.jsx)("button",{onClick:()=>{console.log("Applying promo code:",e)},className:"px-4 bg-custom-background text-custom-green rounded-r-md",children:"استخدام"}),(0,o.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"أدخل الرمز الترويجي",className:"flex-grow p-2 focus:outline-none rounded-l-md",dir:"rtl"})]})},C=s(6300),I=()=>{let[e,t]=(0,i.useState)(a.Card);return(0,o.jsxs)("div",{className:"bg-gray-100 min-h-screen flex flex-col",children:[(0,o.jsx)(C.default,{title:"ادفع",showBackButton:!0}),(0,o.jsxs)("div",{className:"pt-16 flex-grow overflow-auto",children:[(0,o.jsx)(u,{}),(0,o.jsx)(x,{method:e,setMethod:t}),(0,o.jsx)("div",{className:"my-4",children:(0,o.jsx)(w,{})}),(0,o.jsx)(b,{})]}),(0,o.jsx)("div",{className:"m-2 pb-4 sticky bottom-0",children:(0,o.jsx)(v,{method:e})})]})}},6300:function(e,t,s){"use strict";var r=s(4888);s(9318);var a=s(7701),l=s(4517);t.default=e=>{let{title:t,showBackButton:s=!1}=e,n=(0,a.useRouter)();return(0,r.jsxs)("div",{className:"fixed top-0 w-full bg-white p-4 flex items-center justify-between z-10",children:[(0,r.jsx)("h1",{className:"text-lg text-gray-500 font-normal flex-grow text-center",children:t}),s&&(0,r.jsx)("button",{onClick:()=>n.back(),className:"ml-2",children:(0,r.jsx)(l.Z,{className:"h-5 w-5 text-gray-500","aria-hidden":"true"})})]})}},2850:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return r}});let r=s(926)._(s(9318)).default.createContext(null)},4517:function(e,t,s){"use strict";var r=s(9318);let a=r.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?r.createElement("title",{id:a},s):null,r.createElement("path",{fillRule:"evenodd",d:"M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z",clipRule:"evenodd"}))});t.Z=a}},function(e){e.O(0,[927,969,49,419,248,744],function(){return e(e.s=6787)}),_N_E=e.O()}]);